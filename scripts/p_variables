***************************************
***	Erstellung der variables.csv	***
*** Personendatensatz				***
***************************************

clear all
set more off
capture log close

* MAC
use "/Users/katjaschmidt/Desktop/SOEPdata/plattform/p_statistics.dta", clear
global save "/Users/katjaschmidt/ownCloud/Transfer/Plattform/dta/"

global meanvar pglabgro pglabnet pgtatzeit pgvebzeit y11101 plh0164 plh0166 plh0171 ///
		plh0172 plh0173 plh0174 plh0175 plh0176 plh0177 plh0178 plh0179 plh0180 ///
		plh0181 plh0182 plh0183
global probvar party beruf pli0092_h pli0095_h pli0096_h pli0097_h pli0098_h ///
		plh0032 plh0033 plh0034 plh0035 plh0036 plh0037 plh0038 plh0039 plh0040 ///
		plh0042 plj0046 plj0047 erwst
global demo syear sampreg sex bula_h bildungsniveau alter_gr migback regtyp

* Spaltennamen f√ºr csv generieren: study, dataset, version, variable, meantable, proptable, template_id, label, label_de, concept, type, description, description_de, minedition

describe _all, replace
keep name type varlab

gen study = "soep-core"
gen dataset = "p_statistics"
gen version = "v36"
rename name variable
gen meantable = ""
gen probtable = ""
gen template_id = ""
gen label = ""
rename varlab label_de
gen concept = ""
gen description = ""
gen description_de = ""
gen minedition = ""


* meantable 
foreach var of global meanvar {
	replace meantable = "yes" if variable == "`var'"
	replace probtable = "no" if variable == "`var'" 
}

* probtable
foreach var of global probvar {
replace meantable = "no" if variable == "`var'"
replace probtable = "yes" if variable == "`var'" 
}

* dimensionen
foreach var of global demo {
replace meantable = "demo" if variable == "`var'"
replace probtable = "demo" if variable == "`var'" 
}


order study dataset version variable meantable probtable template_id label label_de concept type description description_de minedition
sort variable

save ${save}p_variables.dta, replace
export delimited using "/Users/katjaschmidt/ownCloud/Transfer/Plattform/output/p/variables.csv", replace

* SOEP transfer Laufwerk
* save "\\hume\soep-transfer\Plattform\data\p_plattform_variables_csv.dta", replace
